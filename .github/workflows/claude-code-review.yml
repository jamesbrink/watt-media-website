name: Claude Code Review

on:
pull_request:
types: [opened, synchronize]

jobs:
claude-review:
runs-on: ubuntu-latest
permissions:
contents: write
pull-requests: write
issues: write
id-token: write
actions: read
packages: write
deployments: write
statuses: write
checks: write

```
steps:
  - name: Checkout repository
    uses: actions/checkout@v4
    with:
      fetch-depth: 0
      token: ${{ secrets.GITHUB_TOKEN }}

  - name: Run Claude Code Review
    id: claude-review
    uses: anthropics/claude-code-action@beta
    with:
      claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
      github_token: ${{ secrets.GITHUB_TOKEN }}

      additional_permissions: |
        actions: read
        checks: write
        contents: write
        deployments: write
        issues: write
        packages: write
        pull-requests: write
        statuses: write
      
      direct_prompt: |
        Please review this pull request and provide feedback on:
        - Code quality and best practices
        - Potential bugs or issues
        - Performance considerations
        - Security concerns
        - Test coverage
        
        Be constructive and helpful in your feedback.
